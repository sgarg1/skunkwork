#!/usr/bin/env bash

# Script incrementally increasing the payload to identify the breaking point

URL=$1


echo "Testing against ${URL}"
# 1390 bytes
TESTDATA=".............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................."

# do curl requests incrementing sending data 1 byte with each request to identify breaking point.
for c in $(seq 1 120)
do 
	echo -e "\n\n---------- Payload size: ${#TESTDATA}" # Print size of payload
	curl ${URL} -X GET -d ${TESTDATA}
	TESTDATA=$TESTDATA.
	sleep 1
done 

